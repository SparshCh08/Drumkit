<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quintessential&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@400&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="drumkit.css" />
    <title>Play Drum</title>
  </head>
  <body>
    <div class="letters">
      <!-- data-"your own attribute" -->
      <div data-key="65" class="letter">
        A
        <div class="type">clap</div>
      </div>
      <div data-key="83" class="letter">
        S
        <div class="type">hihat</div>
      </div>
      <div data-key="68" class="letter">
        D
        <div class="type">kick</div>
      </div>
      <div data-key="70" class="letter">
        F
        <div class="type">openhat</div>
      </div>
      <div data-key="71" class="letter">
        G
        <div class="type">boom</div>
      </div>
      <div data-key="72" class="letter">
        H
        <div class="type">ride</div>
      </div>
      <div data-key="74" class="letter">
        J
        <div class="type">snare</div>
      </div>
      <div data-key="75" class="letter">
        K
        <div class="type">tom</div>
      </div>
      <div data-key="76" class="letter">
        L
        <div class="type">tink</div>
      </div>
    </div>

    <div>
      <audio data-key="65" src="sound/clap.wav"></audio>
      <audio data-key="83" src="sound/hihat.wav"></audio>
      <audio data-key="68" src="sound/kick.wav"></audio>
      <audio data-key="70" src="sound/openhat.wav"></audio>
      <audio data-key="71" src="sound/boom.wav"></audio>
      <audio data-key="72" src="sound/ride.wav"></audio>
      <audio data-key="74" src="sound/snare.wav"></audio>
      <audio data-key="75" src="sound/tom.wav"></audio>
      <audio data-key="76" src="sound/tink.wav"></audio>
    </div>

    <script>
      function removeTransition(t) {
        if (t.propertyName != "transform") return;
        //transform is a property to avoid if we press a
        // only it will work for a data-key not for all other keys
        // that's why we returned it
        // t.target.classList.remove("playing");
        this.classList.remove("playing");
      }
      function playDrum(t) {
        const audio = document.querySelector(`audio[data-key="${t.keyCode}"]`);
        //`audio[data-key="${t.keyCode}"]`
        // this is saying if there is any audio with [data-key="your entered key"]
        const key = document.querySelector(`div[data-key="${t.keyCode}"]`);
        if (!audio) return; // unappropriate key return immediately

        key.classList.add("playing");
        audio.currentTime = 0; // to replay the audio
        audio.play();
      }
      const keys = Array.from(document.querySelectorAll(".letter"));
      keys.forEach((key) =>
        key.addEventListener("transitionend", removeTransition)
      );
      window.addEventListener("keydown", playDrum);
      //adding an event in window when key is going down or up "keydown/up"
    </script>
  </body>
</html>
